유닛테스팅
=

유닛테스팅이란 소프트웨어를 기능별로 쪼개고, 그리고 그 기능 내부에서 사용되는 함수들도 쪼개고 쪼개서 아주 작은 단위로 테스팅을 하는 것을 의미한다.  

작업을 하나하나 나눠 각 작업이 잘 이루어지는지 확인  

이러한 작업을 사람이 아닌, 기계가 하도록 우리는 테스트 코드를 작성하여 진행할 수 잇으며 이것을 테스트자동화 라고 한다.  

유닛 테스팅은 내가 작성한  코드가 다른 코드들을 망가뜨리지 않도록, 적어도 우리가 사전에 정의한 상황속에서 보존해준다.

리액트 컴포넌트 테스팅
-
리액트 프로젝트, 또한 컴포넌트 단위 하나로 테스팅이 가능하며, 테스팅할때는 주로 다음과 같은 형식으로 한다.
1. 특정 props에 따라 컴포넌트가 크래쉬 없이 잘 렌더링이 되는가
2. 이전에 렌더링한 결과와 지금 렌더링한 결과가 일치하는가
3. 특정 DOM 이벤트를 시뮬레이트하여, 원하는 변화가 발생하는가
   

스냅샷 테스팅
-

스냅샷 테스팅은 컴포넌트를 주어진 설정으로 렌더링하고, 그 결과물을 파일로 저장한다. 그리고 다음번에 테스팅을 진행하게 되었을 떄, 이전의 결과물과 일치하는 지 확인한다.  
초기 렌더링 결과도 비교 할 수 있지만, 컴포넌트 내부 메소드를 호출시키고, 다시 렌더링 시켜, 그 결과물도 스냅샷을 저장시켜 각 상황에 모두 이전에 렌더링 했던 결과와 일치하는지 비교할 수 있습니다.

설치
```
yarn add --dev react-test-renderer
```

테스트
-

테스트의 주요 키워드 
1. describe
2. it
3. expect
4. 
코드 테스팅 로직을 쪼개고 쪼깰떄, 가장 작은 단위는 it이다.
```
it('is working!', () =>{
    expect(somthing).toBeTruthy();
})
```

it 내부에서는 expect를 통하여 특정 값이 우리가 예상한 값이 나왔는 지 확인 할 수 있다. 해당 방법은 [여기](https://jestjs.io/docs/en/expect.html)를 참조  
describe안에 여러개의 it을 넣을 수 있고, 또 여러개의 describe를 넣을 수 있다.
```
describe('...', () =>{
    describe('...', () => {
        it('...', () =>{});
        it('...', () => {});
    });
    describe('...', () => {
        it('...', () =>{});
        it('...', () => {});
    });
});
```

describe와 it에서 첫번쨰 파라미터는 작업의 설명을 넣어준다. describe는 어떤 기능을 확인하는지, 그리고 it부분에서는 무엇을 검사해야 하는지에 대한 설명을 넣으면 된다.  


yarn test로 테스트를 진행하며, 진행하는 중 스냅샷을 비교하고, 터미널에서 Enter를 누르면 테스트를 다시 실행할 수 있다. U키를 누르면, 스냅샷을 업데이트 하여 현재 스냅샷을 최신으로 설정하여 오류가 더이상 나타나지 않게 할 수 있다.

내부 메소드 호출 및 state 조회
-

react-test-renderer를 하면 실제로 컴포넌트가 렌더링되기 때문에 컴포넌트의 state와 메소드에도 접근할 수 있다.  
메소드를 실행시켜서 state를 업데이트 하고, 리렌더링을 하여 변화에 따라 우리가 의도한대로 렌더링이 되는지 스냅샷을 통해 비교해야한다.